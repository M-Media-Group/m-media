webpackJsonp([8],{APXL:function(t,n){t.exports={render:function(){var t=this.$createElement,n=this._self._c||t;return this.unreadMessages.length>0?n("span",{key:"notifications",staticClass:"text-primary",staticStyle:{background:"#246eba","border-radius":"50%",color:"#ffffff !important",display:"inline-block","line-height":"1.6em","margin-right":"5px","text-align":"center",width:"1.6em"}},[this._v("\n    "+this._s(this.unreadMessages.length)+"\n")]):this._e()},staticRenderFns:[]}},"VU/8":function(t,n){t.exports=function(t,n,i,e,o,s){var a,r=t=t||{},c=typeof t.default;"object"!==c&&"function"!==c||(a=t,r=t.default);var d,f="function"==typeof r?r.options:r;if(n&&(f.render=n.render,f.staticRenderFns=n.staticRenderFns,f._compiled=!0),i&&(f.functional=!0),o&&(f._scopeId=o),s?(d=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},f._ssrRegister=d):e&&(d=e),d){var u=f.functional,l=u?f.render:f.beforeCreate;u?(f._injectStyles=d,f.render=function(t,n){return d.call(n),l(t,n)}):f.beforeCreate=l?[].concat(l,d):[d]}return{esModule:a,exports:r,options:f}}},qJ44:function(t,n,i){var e=i("VU/8")(i("vzE0"),i("APXL"),!1,null,null,null);t.exports=e.exports},vzE0:function(t,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={props:["userid"],data:function(){return{loading:!0,error:!1,success:!1,notifications:[]}},computed:{unreadMessages:function(){return this.notifications.filter(function(t){return null==t.read_at})}},mounted:function(){var t=this;this.getNotifications(),Echo.private("App.User.".concat(this.userid)).notification(function(n){"Notification"in window?"granted"===Notification.permission?t.displayNotification(n):"denied"!==Notification.permission&&Notification.requestPermission().then(function(t){"granted"===t&&this.displayNotification(n)}):console.log("This browser does not support desktop notification"),t.notifications.unshift({data:{title:n.title,message:n.message,action:n.action,action_text:n.action_text},created_at:(new Date).toLocaleString()}),t.playSound()})},methods:{playSound:function(){new Audio("/sounds/bell.mp3").play()},getNotifications:function(){var t=this;this.loading=!0,axios.get("/api/users/"+this.userid+"/notifications").then(function(n){t.notifications=n.data,t.loading=!1}).catch(function(n){console.log(n),t.loading=!1,t.error=!0})},displayNotification:function(t){new Notification(t.title,{body:t.message,icon:"/images/logo.png"})}}}}});
//# sourceMappingURL=8.js.map