(self.webpackChunkbigsite=self.webpackChunkbigsite||[]).push([[22],{3022:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>r});const a={props:["url"],data:function(){return{avatar:null,avatar_url:null,title:"",loading:!1,error:!1,error_msg:!1,success:!1,user:null,progress:0,file_url:null,file_user_id:null,upload_url:null,use_url:!1}},mounted:function(){},methods:{newFile:function(t){var e=t.target.files;e.length&&(this.avatar=e[0]);var s=URL.createObjectURL(this.avatar);this.avatar_url=s,this.title=this.avatar.name},updateFile:function(){var t=this,e=new FormData;this.loading=!0,e.append("title",this.title),this.use_url&&this.upload_url?e.append("url",this.upload_url):e.append("file",this.avatar);var s={onUploadProgress:function(e){t.progress=Math.floor(100*e.loaded/e.total)}};axios.post(this.url,e,s).then((function(e){if(t.success=!0,t.error=!1,console.log(e),t.loading=!1,t.file_url=e.data.id,t.file_user_id=e.data.user_id,t.avatar_url=null,t.title=null,t.use_url||t.upload_url)t.upload_url=null;else{var s=t.$refs.fileInput;s.type="text",s.type="file"}})).catch((function(e){t.error=!0,t.success=!1,t.error_msg=e.message,console.log(e),t.loading=!1}))},getUser:function(){axios.get("/api/user").then((function(t){console.log("Go get"),console.log(t)})).catch((function(t){console.log(t)}))}}};const r=(0,s(1900).Z)(a,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("transition-group",{attrs:{name:"fade",mode:"out-in"}},[s("form",{directives:[{name:"show",rawName:"v-show",value:!t.success&&!t.error&&!t.loading,expression:"!success && !error && !loading"}],key:"1",staticClass:"mb-0",attrs:{action:"#",method:"POST",enctype:"multipart/form-data"},on:{submit:function(e){return e.preventDefault(),t.updateFile(e)}}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.avatar_url,expression:"avatar_url"}],staticClass:"row mb-3"},[s("img",{staticClass:"u-center",staticStyle:{"max-height":"100px"},attrs:{src:t.avatar_url}})]),t._v(" "),s("div",{staticClass:"form-group row"},[s("label",{staticClass:"four columns col-form-label u-right-text-on-desktop",attrs:{for:"file"}},[t._v("File")]),t._v(" "),s("div",{staticClass:"six columns"},[t.use_url?s("input",{directives:[{name:"model",rawName:"v-model",value:t.upload_url,expression:"upload_url"}],staticClass:"form-control",staticStyle:{"margin-bottom":"0"},attrs:{name:"URL",id:"url",type:"url",placeholder:"URL to the file"},domProps:{value:t.upload_url},on:{input:function(e){e.target.composing||(t.upload_url=e.target.value)}}}):s("input",{ref:"fileInput",staticClass:"form-control",staticStyle:{"margin-bottom":"0"},attrs:{type:"file",name:"file",id:"file",required:"",autofocus:""},on:{change:t.newFile}}),t._v(" "),s("a",{staticClass:"small text-muted",attrs:{href:"##"},on:{click:function(e){t.use_url=!t.use_url}}},[t._v(t._s(t.use_url?"Upload a file":"Upload via a URL"))])])]),t._v(" "),s("div",{staticClass:"form-group row"},[s("label",{staticClass:"four columns col-form-label u-right-text-on-desktop",attrs:{for:"title"}},[t._v("Title")]),t._v(" "),s("div",{staticClass:"six columns"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"form-control",attrs:{name:"title",id:"title",type:"text",placeholder:"Descriptive titles help us tag the file"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"form-group row mb-0"},[s("div",{staticClass:"eight columns offset-by-four"},[s("button",{staticClass:"button button-primary",attrs:{type:"submit"}},[t._v("Upload")])])])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],key:"2",staticClass:"alert alert-info",attrs:{role:"alert"}},[t._v("\n            Please wait. Your file is uploading...\n            "),s("div",{staticClass:"progress"},[s("div",{staticClass:"progress-bar",style:"width:"+t.progress+"%",attrs:{role:"progressbar","aria-valuenow":t.progress,"aria-valuemin":"0","aria-valuemax":"100"}})])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.success,expression:"success"}],key:"3",staticClass:"alert alert-success",attrs:{role:"alert"}},[t._v("\n            File uploaded!"),s("br"),t._v(" "),s("a",{staticClass:"button button-primary",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.success=!1}}},[t._v("Upload another file")]),t._v(" "),s("a",{staticClass:"button",attrs:{href:"/files/"+t.file_url}},[t._v("Open file")]),t._v(" "),s("a",{staticClass:"button",attrs:{href:"/files?user="+t.file_user_id}},[t._v("See all files")])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.error,expression:"error"}],key:"4",staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v("\n            File error! "+t._s(t.error_msg)),s("br"),t._v(" "),s("a",{staticClass:"button button-primary",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.error=!1}}},[t._v("Retry file upload")]),t._v(" "),s("a",{staticClass:"button",attrs:{href:"/contact"}},[t._v("Contact us for help")])]),t._v(" "),s("div",{key:"5",staticClass:"row"},[s("div",{staticClass:"eight columns offset-by-four text-muted"},[s("span",{directives:[{name:"tooltip",rawName:"v-tooltip:top",value:"Each URL generated to your file is only valid for five minutes. If you want your file to be publicly accessible and with long-lived URLs, go to Your Profile, then All Files, then for the file you want public check the Public option box.",expression:"\n                        'Each URL generated to your file is only valid for five minutes. If you want your file to be publicly accessible and with long-lived URLs, go to Your Profile, then All Files, then for the file you want public check the Public option box.'\n                    ",arg:"top"}],staticClass:"label label-default"},[t._v("Your file is private by default.")]),t._v(" "),s("br"),t._v(" "),s("a",{attrs:{href:"https://blog.mmediagroup.fr/post/share-files-with-m-media/",target:"_BLANK",rel:"noopener"}},[t._v("Need help?")])])])])],1)}),[],!1,null,null,null).exports},1900:(t,e,s)=>{"use strict";function a(t,e,s,a,r,l,o,i){var n,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=s,u._compiled=!0),a&&(u.functional=!0),l&&(u._scopeId="data-v-"+l),o?(n=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},u._ssrRegister=n):r&&(n=i?function(){r.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:r),n)if(u.functional){u._injectStyles=n;var c=u.render;u.render=function(t,e){return n.call(e),c(t,e)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,n):[n]}return{exports:t,options:u}}s.d(e,{Z:()=>a})}}]);
//# sourceMappingURL=22.js.map