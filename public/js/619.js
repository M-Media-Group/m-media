(self.webpackChunkbigsite=self.webpackChunkbigsite||[]).push([[619],{1619:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});const i={props:["userid"],data:function(){return{loading:!0,error:!1,success:!1,invoice:null}},mounted:function(){this.getSub()},methods:{getTimestamp:function(t){var e=t.next_payment_attempt?new Date(1e3*t.next_payment_attempt):new Date(1e3*t.created);return moment(e).fromNow()},formatNumber:function(t,e){return new Intl.NumberFormat(void 0,{style:"currency",currency:e}).format(t)},getSub:function(){var t=this;this.loading=!0,axios.get("/api/users/"+this.userid+"/future-invoice").then((function(e){t.invoice=e.data,t.loading=!1,console.log(t.invoice)})).catch((function(e){console.log(e),t.loading=!1,t.error=!0}))}}};const o=(0,n(1900).Z)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition-group",{staticStyle:{width:"100%"},attrs:{name:"fade",mode:"out-in",tag:"div"}},[t.invoice&&!t.loading?n("div",{key:"invoices",staticClass:"table-responsive"},[t.invoice.lines.data?n("div",{key:"items",staticClass:"table-responsive"},[n("table",{staticClass:"table"},[n("thead",[n("tr",[n("th",[t._v("Product / service")]),t._v(" "),n("th",[t._v("Price")])])]),t._v(" "),n("tbody",[t._l(t.invoice.lines.data,(function(e){return n("tr",{key:e.id},[n("td",[t._v(t._s(e.description))]),t._v(" "),n("td",[t._v(t._s(t.formatNumber(e.amount/100,t.invoice.currency)))])])})),t._v(" "),n("tr",[n("th",{staticStyle:{"text-align":"right"}},[t._v("Subtotal")]),t._v(" "),n("td",[t._v(t._s(t.formatNumber(t.invoice.subtotal/100,t.invoice.currency)))])]),t._v(" "),t.invoice.discount?n("tr",[n("th",{staticStyle:{"text-align":"right"}},[t._v("Discount")]),t._v(" "),n("td",[t._v("\n                               "+t._s(t.invoice.discount.coupon.amount_off?t.invoice.discount.coupon.amount_off:t.invoice.discount.coupon.percent_off+"% off")+"\n                           ")])]):t._e(),t._v(" "),n("tr",[n("th",{staticStyle:{"text-align":"right"}},[t._v("Total")]),t._v(" "),n("th",[t._v(t._s(t.formatNumber(t.invoice.total/100,t.invoice.currency)))])])],2)])]):t._e()]):t._e(),t._v(" "),t.invoice&&!t.loading?n("div",{key:"nextpayment",staticClass:"text-muted"},[t._v("\n           Next invoice will be\n           "+t._s("charge_automatically"===t.invoice.collection_method?"charged automatically":"sent to you for manual payment")+"\n           "+t._s(t.getTimestamp(t.invoice))+". Total may change before payment date.\n           "),n("a",{attrs:{href:"https://blog.mmediagroup.fr/post/see-future-invoice/",target:"_BLANK",rel:"noopener"}},[t._v("Learn more")])]):t.loading?n("div",{key:"loading",staticClass:"alert"},[t._v("Loading...")]):n("div",{key:"error",staticClass:"alert text-muted"},[t._v("You have no upcoming invoice.")])])}),[],!1,null,null,null).exports},1900:(t,e,n)=>{"use strict";function i(t,e,n,i,o,a,r,s){var c,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=n,u._compiled=!0),i&&(u.functional=!0),a&&(u._scopeId="data-v-"+a),r?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},u._ssrRegister=c):o&&(c=s?function(){o.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:o),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(t,e){return c.call(e),l(t,e)}}else{var v=u.beforeCreate;u.beforeCreate=v?[].concat(v,c):[c]}return{exports:t,options:u}}n.d(e,{Z:()=>i})}}]);
//# sourceMappingURL=619.js.map